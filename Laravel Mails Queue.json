[[1581014159330,"h1","Laravel Mails Queue"],[1581014159068,"p","Create Mailable class."],[1581014306041,"javascript","php artisan queue:table"],[1581014306403,"p","Then you get: database/migrations/xxxx_xx_xx_xxxxxx_create_jobs_table.php"],[1581014306676,"javascript","<?php\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\nclass CreateJobsTable extends Migration\n{\n    public function up()\n    {\n        Schema::create('jobs', function (Blueprint $table) {\n            $table->bigIncrements('id');\n            $table->string('queue')->index();\n            $table->longText('payload');\n            $table->unsignedTinyInteger('attempts');\n            $table->unsignedInteger('reserved_at')->nullable();\n            $table->unsignedInteger('available_at');\n            $table->unsignedInteger('created_at');\n        });\n    }\n\n    public function down()\n    {\n        Schema::dropIfExists('jobs');\n    }\n}\n"],[1581022645578,"p","Run the migrations."],[1581022645742,"javascript","php artisan migrate"],[1581014526388,"p","Implement ShouldQueue in app/Mail/MailableClass.php"],[1581189226737,"javascript","<?php\nnamespace App\\Mail;\n...\nuse Illuminate\\Contracts\\Queue\\ShouldQueue; //check it out\nclass MailableClass extends Mailable implements ShouldQueue //check it out\n{\n    use Queueable, SerializesModels;\n    public function build()\n    {\n        return $this->view('mail.testmailing');\n    }\n}"],[1581189227491,"p","Controller"],[1581014526848,"javascript","<?php\nnamespace App\\Http\\Controllers;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Mail;\nuse Illuminate\\Support\\Carbon;\nuse App\\Mail\\TestMailing;\nclass MailTesting extends Controller\n{\n    public function form(Request $request)\n    {\n        return view('mail.form');\n    }\n    public function send(Request $request)\n    {\n        Mail::to($request->mail)->send(new TestMailing($request->title));\n        return 'mail sent';\n    }\n    public function sendSchedule(Request $request)\n    {\n        $when = Carbon::createFromFormat('d/m/Y H:i:s',  '19/02/2019 00:00:00'); \n        Mail::to($request->mail)\n        ->later(\n            $when,\n            new TestMailing($request->title)\n        );\n        return 'mail will be sent at 19/02/2019 00:00:00';\n    }\n}"],[1581014527068,"p","config/queue.php  file by default is ok."],[1581014527262,"javascript","<?php\nreturn [\n    'default' => env('QUEUE_CONNECTION', 'sync'),\n    'connections' => [\n        ...\n        'database' => [\n            'driver' => 'database',\n            'table' => 'jobs',\n            'queue' => 'default',\n            'retry_after' => 90,\n        ],\n    ]\n    ...\n]"],[1581014706208,"p","Change QUEUE_CONNECTION constant in .env file."],[1581014706407,"javascript","QUEUE_CONNECTION=sync"],[1581014706785,"p","Replace value by database."],[1581057887808,"javascript","QUEUE_CONNECTION=database"],[1581057888585,"p","Then run the following command to start the process that will watch the jobs in the database."],[1581190271752,"javascript","php artisan queue:work"],[1581190272011,"h2","To stop the work:"],[1581190291331,"javascript","ps aux | grep php "],[1581190291505,"p","then "],[1581014707105,"html","kill -9 process-pid"],[1581016522770,"p","Follow the official documentation: https://laravel.com/docs/6.x/mail#queueing-mail"]]